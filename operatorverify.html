<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-select=none">
    <title>OPERATOR VERIFICATION PROTOCOL</title>
    <style>
        :root {
            --neon: #00f2ff; /* M√†u ch·ªß ƒë·∫°o c·ªßa Operator */
            --bg-color: #000a0f;
            --glass-bg: rgba(0, 15, 20, 0.85);
            --scan-color: rgba(0, 242, 255, 0.8);
        }

        body {
            margin: 0;
            height: 100vh;
            background-color: black;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* === CHUNG CHO C·∫¢ 2 GIAO DI·ªÜN === */
        .full-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        /* N√öT BACK (G√≥c d∆∞·ªõi c√πng) */
        .btn-back {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 40px;
            color: var(--neon);
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--neon);
            backdrop-filter: blur(5px);
            cursor: pointer;
            font-weight: bold;
            letter-spacing: 2px;
            transition: 0.3s;
            z-index: 50;
            text-decoration: none; /* D√πng th·∫ª a */
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
        }
        .btn-back:hover {
            background: var(--neon);
            color: black;
            box-shadow: 0 0 30px var(--neon);
        }

        /* KHUNG TASK K√çNH NEON (D√πng chung style) */
        .neon-card {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 220px; /* ƒê·ªô r·ªông g·ªëc c·ªßa b·∫°n */
    min-height: 300px;
    padding: 20px 25px; /* T√¥i ch·ªânh l·∫°i padding tr√™n-d∆∞·ªõi ƒë·ªÅu nhau ƒë·ªÉ ch·ªØ v√†o gi·ªØa t√¢m */
    text-align: center;
    color: var(--neon);
    /* === L·ªÜNH GI·ªÆ CH·ªÆ LU√îN ·ªû GI·ªÆA (B·ªî SUNG) === */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    /* N·ªÄN K√çNH M·ªú SATURATE (G·ªêC) */
    background: radial-gradient(
        circle at center,
        rgba(0, 242, 255, 0.15) 0%, 
        rgba(0, 242, 255, 0.05) 70%, 
        rgba(0, 242, 255, 0.02) 100%
    ); 
    backdrop-filter: blur(15px) saturate(200%);
    filter: drop-shadow(0 0 15px rgba(0, 242, 255, 1));
    
    /* H√åNH KHUNG B·∫§T ƒê·ªêI X·ª®NG (G·ªêC) */
    clip-path: polygon(
        0 5%, 5% 0, 95% 0, 100% 5%, 
        100% 90%, 92% 100%, 8% 100%, 0 92%
    );

    /* VI·ªÄN CH√çNH M·ªú (G·ªêC) */
    border: 1px solid rgba(0, 242, 255, 0.15);
    
    position: relative;
    cursor: pointer;
    transition: all 0.4s ease;

animation: float-centered 6s ease-in-out infinite;
} 
/* VI·ªÄN D√ÄY V√Ä G√ìC NH·ªåN (G·ªêC - GI·ªÆ NGUY√äN) */
.neon-card::before {
    content: "";
    position: absolute;
    top: -2px; left: -2px; right: -2px; bottom: -2px;
    background: 
        linear-gradient(to right, var(--neon) 4px, transparent 4px) 0 0,
        linear-gradient(to bottom, var(--neon) 4px, transparent 4px) 0 0,
        linear-gradient(to left, var(--neon) 4px, transparent 4px) 100% 0,
        linear-gradient(to bottom, var(--neon) 10px, transparent 10px) 100% 0,
        linear-gradient(to right, var(--neon) 15px, transparent 15px) 0 100%,
        linear-gradient(to top, var(--neon) 4px, transparent 4px) 0 100%;
    background-repeat: no-repeat;
    background-size: 40px 40px;
    pointer-events: none;
    filter: drop-shadow(0 0 5px var(--neon));
}

/* TH∆Ø·ªöC ƒêO B√äN H√îNG (G·ªêC - GI·ªÆ NGUY√äN) */
.neon-card::after {
    content: "";
    position: absolute;
    right: 10px;
    top: 20%;
    height: 60%;
    width: 4px;
    background: repeating-linear-gradient(
        to bottom,
        var(--neon),
        var(--neon) 1px,
        transparent 1px,
        transparent 6px
    );
    opacity: 0.3;
}

        /* === LAYER 1: GIAO DI·ªÜN KH·ªûI CH·∫†Y (B·ª§I C√îNG NGH·ªÜ) === */
        #layer-cover {
            z-index: 10;
            background: black;
            /* Clip-path s·∫Ω ƒë∆∞·ª£c thay ƒë·ªïi b·∫±ng JS ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng lau ƒëi */
            clip-path: inset(0 0 0 0); 
            transition: clip-path 0.1s linear; /* M∆∞·ª£t m√† theo tia qu√©t */
        }

        .tech-particles {
            position: absolute; width: 100%; height: 100%; pointer-events: none;
        }
        .particle {
            position: absolute; width: 2px; height: 2px; background: var(--neon);
            border-radius: 50%; box-shadow: 0 0 4px var(--neon);
            animation: float 10s infinite ease-in-out; opacity: 0;
        }
        @keyframes float {
            0% { opacity: 0; transform: translateY(0); }
            50% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(-100px); }
        }

        .system-msg {
            position: absolute;
            top: 40%; left: 50%;
            text-align: center; 
            transform: translateX(-50%);
            color: var(--neon);
            font-size: 16px;
            letter-spacing: 2px;
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            text-shadow: 0 0 10px var(--neon);
        }

        /* TIA QU√âT (SCAN LINE) */
        .scan-line {
            position: fixed;
            top: -10px; left: 0;
            width: 100%;
            height: 5px;
            background: var(--neon);
            box-shadow: 0 0 20px var(--neon), 0 0 40px var(--neon);
            z-index: 100;
            opacity: 0; /* M·∫∑c ƒë·ªãnh ·∫©n */
            pointer-events: none;
        }

        /* === LAYER 2: GIAO DI·ªÜN ·∫®N (BACKGROUND IMAGE) === */
        #layer-hidden {
            z-index: 1;
            background: url('verify.jpg') no-repeat center center;
            background-size: cover;
        }

        /* POPUP NH·∫¨P M√É & K·∫æT QU·∫¢ */
        .popup-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none; justify-content: center; align-items: center;
            z-index: 200;
        }
        
        .popup-box {
            width: 320px;
            background: rgba(0, 15, 20, 0.95);
            border: 1px solid var(--neon);
            padding: 20px;
            text-align: center;
            color: var(--neon);
            box-shadow: 0 0 30px var(--neon);
            border-radius: 6px;
            animation: popIn 0.3s ease-out;
            display: flex; flex-direction: column; gap: 15px;
        }

        @keyframes popIn { from {transform: scale(0.8); opacity: 0;} to {transform: scale(1); opacity: 1;} }

        /* Input Password */
        .code-input {
            width: 80%;
            padding: 10px;
            background: rgba(0,0,0,0.5);
            border: 1px solid var(--neon);
            color: var(--neon);
            font-family: 'Courier New', monospace;
            text-align: center;
            font-size: 18px;
            outline: none;
            margin: 0 auto;
        }
        .code-input:focus { box-shadow: 0 0 15px var(--neon); }

        .btn-action {
            padding: 8px 20px;
            background: transparent;
            border: 1px solid var(--neon);
            color: var(--neon);
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
            margin-top: 10px;
        }
        .btn-action:hover { background: var(--neon); color: black; }

        /* TR·∫†NG TH√ÅI X√ÅC TH·ª∞C (Loading) */
        .loading-icon { font-size: 40px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }
        
        .progress-bar-container {
            width: 100%; height: 4px; background: #333; margin-top: 10px;
        }
        .progress-bar {
            width: 0%; height: 100%; background: var(--neon);
            box-shadow: 0 0 10px var(--neon);
        }

        /* KHUNG CU·ªòN K·∫æT QU·∫¢ */
        .scroll-content {
            max-height: 150px;
            overflow-y: auto;
            text-align: left;
            font-size: 12px;
            border: 1px solid rgba(0, 242, 255, 0.3);
            padding: 10px;
            margin-bottom: 10px;
            white-space: pre-wrap; /* Gi·ªØ ƒë·ªãnh d·∫°ng xu·ªëng d√≤ng */
        }
        /* Custom thanh cu·ªôn */
        .scroll-content::-webkit-scrollbar { width: 4px; }
        .scroll-content::-webkit-scrollbar-thumb { background: var(--neon); }

        /* TR·∫†NG TH√ÅI SAI (ƒê·ªé) */
        .error-state {
            border-color: #ff3333 !important;
            color: #ff3333 !important;
            box-shadow: 0 0 30px #ff3333 !important;
        }
        .error-state .btn-action {
            border-color: #ff3333 !important;
            color: #ff3333 !important;
        }
        .error-state .btn-action:hover {
            background: #ff3333 !important;
            color: black !important;
        }
/* --- HI·ªÜU ·ª®NG TR√îI N·ªîI (ƒê√£ ƒëi·ªÅu ch·ªânh cho th·∫ª cƒÉn gi·ªØa) --- */
@keyframes float-centered {
    0%, 100% {
        /* ·ªû v·ªã tr√≠ th·∫•p nh·∫•t, v·∫´n gi·ªØ cƒÉn gi·ªØa */
        transform: translate(-50%, -50%);
    }
    50% {
        /* Tr√¥i l√™n cao 20px so v·ªõi v·ªã tr√≠ gi·ªØa */
        transform: translate(-50%, calc(-50% - 20px));
    }
}

    </style>
</head>
<body>

    <div class="scan-line" id="scanLine"></div>

    <div class="full-screen" id="layer-cover">
        <div class="tech-particles" id="particles"></div>
        
        <div class="system-msg" id="sysMsg">H·ªÜ TH·ªêNG ƒêANG KH·ªûI CH·∫†Y...</div>

        <div class="neon-card" id="triggerCard" onclick="startScanProcess()">
            <div>VUI L√íNG CH·∫†M V√ÄO ƒê·ªÇ<br>X√ÅC MINH DANH T√çNH</div>
        </div>

        <a href="admin.html" class="btn-back">BACK</a>
    </div>

    <div class="full-screen" id="layer-hidden">
        
        <div class="neon-card" onclick="openInputPopup()">
            <div>CH·∫†M V√ÄO ƒê·ªÇ NH·∫¨P M√É NGU·ªíN X√ÅC MINH </div>
        </div>

        <a href="admin.html" class="btn-back">BACK</a>
    </div>

    <div class="popup-overlay" id="popupInput">
        <div class="popup-box">
            <div> XIN VUI L√íNG NH·∫¨P M√É NGU·ªíN C·ª¶A H·ªÜ TH·ªêNG</div>
            <input type="password" class="code-input" id="inputCode" placeholder="***">
            <button class="btn-action" onclick="submitCode()">X√ÅC NH·∫¨N</button>
        </div>
    </div>

    <div class="popup-overlay" id="popupProcess">
        <div class="popup-box">
            <div class="loading-icon">üîé</div>
            <div>ƒêANG X√ÅC TH·ª∞C D·ªÆ LI·ªÜU...</div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="popupResult">
        <div class="popup-box" id="resultBox">
            <div id="resultIcon" style="font-size: 30px; margin-bottom: 10px;">‚úÖ</div>
            <div class="scroll-content" id="resultContent">no</div>
            <button class="btn-action" id="resultBtn" onclick="handleResultClick()">OK</button>
        </div>
    </div>

    <script>
        // --- 1. HI·ªÜU ·ª®NG B·ª§I (LAYER 1) ---
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 70; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + '%';
            p.style.top = Math.random() * 100 + '%';
            p.style.animationDelay = Math.random() * -2 + 's';
            particlesContainer.appendChild(p);
        }

        // --- 2. LOGIC QU√âT SCAN (Lau l·ªõp Cover) ---
        function startScanProcess() {
            const triggerCard = document.getElementById('triggerCard');
            const sysMsg = document.getElementById('sysMsg');
            const scanLine = document.getElementById('scanLine');
            const cover = document.getElementById('layer-cover');

            // ·∫®n n√∫t, hi·ªán ch·ªØ
            triggerCard.style.display = 'none';
            sysMsg.style.display = 'block';

            // Sau 2 gi√¢y -> B·∫Øt ƒë·∫ßu qu√©t
            setTimeout(() => {
                sysMsg.style.display = 'none';
                scanLine.style.opacity = '1';
                
                // Animation qu√©t b·∫±ng JS ƒë·ªÉ ƒë·ªìng b·ªô clip-path
                let progress = 0;
                const scanDuration = 3000; // 3 gi√¢y qu√©t ch·∫≠m
                const startTime = performance.now();

                function animateScan(time) {
                    const elapsed = time - startTime;
                    progress = Math.min(elapsed / scanDuration, 1);
                    
                    // Di chuy·ªÉn tia qu√©t
                    scanLine.style.top = (progress * 100) + '%';
                    
                    // C·∫Øt l·ªõp cover (lau ƒëi ph·∫ßn tr√™n)
                    // inset(top right bottom left) -> TƒÉng top t·ª´ 0% l√™n 100%
                    cover.style.clipPath = `inset(${progress * 100}% 0 0 0)`;

                    if (progress < 1) {
                        requestAnimationFrame(animateScan);
                    } else {
                        // Qu√©t xong
                        scanLine.style.opacity = '0';
                        cover.style.display = 'none'; // ·∫®n h·∫≥n l·ªõp 1
                    }
                }
                requestAnimationFrame(animateScan);

            }, 2000);
        }

        // --- 3. LOGIC X·ª¨ L√ù M√É (TO√ÅN H·ªåC) ---
        let finalAccessLevel = null; // L∆∞u k·∫øt qu·∫£ n·∫øu ƒë√∫ng

        function openInputPopup() {
            document.getElementById('popupInput').style.display = 'flex';
            document.getElementById('inputCode').value = ''; // Reset input
            document.getElementById('inputCode').focus();
        }

        function submitCode() {
            const code = document.getElementById('inputCode').value;
            if (!code) return;

            // ƒê√≥ng nh·∫≠p -> M·ªü x·ª≠ l√Ω
            document.getElementById('popupInput').style.display = 'none';
            document.getElementById('popupProcess').style.display = 'flex';

            // Ch·∫°y c√¢y ti·∫øn tr√¨nh 3s
            const bar = document.getElementById('progressBar');
            bar.style.transition = 'width 3s linear';
            
            // Hack nh·ªè ƒë·ªÉ trigger transition
            setTimeout(() => { bar.style.width = '100%'; }, 100);

            // Sau 3s -> Ki·ªÉm tra k·∫øt qu·∫£
            setTimeout(() => {
                checkLogic(code);
            }, 3000);
        }

        function checkLogic(inputCode) {
            document.getElementById('popupProcess').style.display = 'none';
            const userCode = parseInt(inputCode);
            
            // L·∫•y th·ªùi gian hi·ªán t·∫°i
            const now = new Date();
            const day = now.getDate();
            const month = now.getMonth() + 1; // JS th√°ng b·∫Øt ƒë·∫ßu t·ª´ 0
            const year = now.getFullYear();
            const hour = now.getHours();

            // C√¥ng th·ª©c: (Ng√†y + Th√°ng + NƒÉm) * Gi·ªù
            const baseValue = (day + month + year) * hour;

            // C√°c tr∆∞·ªùng h·ª£p ƒë√∫ng
            const codeOp1 = baseValue + 1;
            const codeOp3 = baseValue + 3;
            const codeOp7 = baseValue + 7;
            const codeOp30 = baseValue + 30;

            let isSuccess = false;
            let resultKey = '';

            if (userCode === codeOp1) {
                isSuccess = true;
                resultKey = 'OPERATOR-1';
            } else if (userCode === codeOp3) {
                isSuccess = true;
                resultKey = 'OPERATOR-3';
            } else if (userCode === codeOp7) {
                isSuccess = true;
                resultKey = 'OPERATOR-7';
            } else if (userCode === codeOp30) {
                isSuccess = true;
                resultKey = 'OPERATOR-30';
            }

            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            const resultPopup = document.getElementById('popupResult');
            const resultBox = document.getElementById('resultBox');
            const resultIcon = document.getElementById('resultIcon');
            const resultContent = document.getElementById('resultContent');
            
    resultPopup.style.display = 'flex';

    if (isSuccess) {
        /* ============================================================
           TR∆Ø·ªúNG H·ª¢P: ƒê√öNG (ACCESS GRANTED)
           B·∫°n nh·∫≠p ghi ch√∫ cho m√£ ƒê√öNG v√†o gi·ªØa 2 d·∫•u ` d∆∞·ªõi ƒë√¢y:
           ============================================================ */
        resultBox.classList.remove('error-state');
        resultIcon.innerHTML = 'üìù ACCESS GRANTED';
        finalAccessLevel = resultKey;

        resultContent.innerHTML = `[H·ªÜ TH·ªêNG X√ÅC NH·∫¨N TH√ÄNH C√îNG]
Quy·ªÅn truy c·∫≠p: ${resultKey}
C√°c t√≠nh nƒÉng ·ªü c·∫•p ƒë·ªô OPERATOR ƒë√£ m·ªü kh√≥a`;

    } else {
        /* ============================================================
           TR∆Ø·ªúNG H·ª¢P: SAI (ACCESS DENIED)
           B·∫°n nh·∫≠p ghi ch√∫ cho m√£ SAI v√†o gi·ªØa 2 d·∫•u ` d∆∞·ªõi ƒë√¢y:
           ============================================================ */
        resultBox.classList.add('error-state');
        resultIcon.innerHTML = '‚ùå ACCESS DENIED';
        finalAccessLevel = null;

        resultContent.innerHTML = `[C·∫¢NH B√ÅO: M√É NGU·ªíN KH√îNG KH·ªöP]
Tr·∫°ng th√°i: Truy c·∫≠p tr√°i ph√©p
H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ƒëƒÉng xu·∫•t!!!`;
    }
}

        function handleResultClick() {
            if (finalAccessLevel) {
                // L∆ØU DATA V√ÄO LOCAL V√Ä CHUY·ªÇN TRANG
                localStorage.setItem('AURA_CLEARANCE_LEVEL', finalAccessLevel);
                
                // K√≠ch ho·∫°t timestamp cho ƒë·ªìng h·ªì b√™n trang ch·ªß (t√≠nh t·ª´ l√∫c n√†y)
                // G·ªçi h√†m gi·∫£ l·∫≠p ho·∫∑c t·ª± t√≠nh ƒë·ªÉ l∆∞u EXPIRY lu√¥n n·∫øu mu·ªën ch·∫Øc ƒÉn
                // Nh∆∞ng theo logic c≈©, trang ch·ªß s·∫Ω t·ª± t√≠nh khi th·∫•y key m·ªõi.
                // Tuy nhi√™n, c·∫ßn x√≥a EXPIRY c≈© ƒëi ƒë·ªÉ trang ch·ªß bi·∫øt l√† m√£ m·ªõi.
                localStorage.removeItem('AURA_EXPIRY_TIMESTAMP');
                
                window.location.href = 'hologram0.html';
            } else {
                // SAI -> V·ªÄ ADMIN
                window.location.href = 'admin.html';
            }
        }

    </script>
</body>
</html>
